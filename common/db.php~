/**
 * Our Database class, handles flat files
 * this file is based of the flatDB project by Max Kostinevich
 * 
 * @author Justin Parra <parra.justin.main@gmail.com>
 */

namespace db;

/*  So we can handle exceptions here */
class Exception extends \Exception {}

class db {
  private $directory;

  /**
   *  Constructor creates the database
   */
  public function __construct($path, $db_name = 'default') {
    $this->directory = $path . (substr(strval($path), -1) === '/'? '' : '/') . $db_name . '/'; // substr checks if the last char is already a /

    //Can the directory even exist?
    if( !is_dir($this->directory) ) {
      if( !mkdir($this->directory) )
        throw new Exception('Failed to make directory, permission failed');
      else
        file_put_contents($this->directory . 'index.php', "<?php"); // add an index.php so that the database can't be indexed
    }
  }
}






